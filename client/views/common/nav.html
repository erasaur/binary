<template name="nav">
  <div class="navbar navbar-fixed-top">
    <div class="container">
      <div class="navbar-header col-sm-2" style="padding-right: 0;">
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="../" class="navbar-brand" style="right: 0;">yamcha</a>
      </div>
      <nav class="navbar-collapse collapse in" id="main-navbar" role="navigation" aria-expanded="true">
        <ul class="nav navbar-nav col-sm-8" style="margin: 0; padding: 0;">
          <!-- <form class="navbar-form" id="js-search-form" role="search" style="margin: 8px 0;">
            <div class="form-group has-feedback" style="width: 100%;">
              <input type="text" class="form-control" placeholder="Search" style="width: 100%;">
            </div>
          </form> -->
          {{> searchInput}}
        </ul>
        
        {{#if currentUser}}
          <ul class="nav navbar-nav col-sm-2" style="margin: 0; padding-left: 0; padding-right: 0;">
            <li class="dropdown">
              <a href="#" data-toggle="modal" data-target="#new-topic-modal"><i class="hidden-xs fa fa-plus"></i><span class="visible-xs">Add New Topic</span></a>
            </li>
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" id="nav-profile" data-toggle="dropdown"><i class="hidden-xs fa fa-user"></i><span class="visible-xs">Your Profile</span></a>
              <div class="dropdown-menu">
                <ul>
                  <li><a href="{{pathFor route='profile' data=currentUser}}" class="list-item"><span>Profile</span></a></li>
                  <li><a href="#" id="js-logout" class="list-item"><span>Log Out</span></a></li>
                </ul>
              </div>
            </li>
            {{> notifications}}
          </ul>
        {{/if}}
      </nav>
    </div>
  </div>


  <!-- <div class="visible-xs">
  	<div class="navbar-collapsed">
			<div class="navbar-items">
        {{> navItems}}
      </div>
      <a href="{{pathFor route='home'}}" class="navbar-brand">yamcha</a>
		</div>
  </div>
	<div class="hidden-xs">
		<div class="navbar-transparent row">

			<div class="col-sm-2"> 
        <button class="btn btn-default invite" data-toggle="dropdown">Invite!</button>
        <div class="dropdown-menu invite-menu">
          {{#if currentUser.invites.inviteCount}}
            <p>You have {{currentUser.invites.inviteCount}} invites left.</p>
            <div class="input-group">
              <input type="email" id="js-invite-email" class="form-control" placeholder="Your friend's email">
              <span class="input-group-btn"><button id="js-invite" class="btn btn-default" type="button">Send</button></span>
            </div>
          {{else}}
            <span>You have no invites left :(</span>
          {{/if}}
        </div>
				<a href="{{pathFor route='home'}}" class="navbar-brand">yamcha</a>
			</div>

      <div class="col-sm-8">
        {{> searchInput}}
      </div>

			<div class="col-sm-2 navbar-items">
				{{> navItems}}
			</div>

		</div>
	</div> -->
  {{> newTopic}}
</template>

<template name="navItems">
  {{#if currentUser}}
  	<ul class="nav navbar-nav">
      <li class="dropdown">
        <a href="#" data-toggle="modal" data-target="#new-topic-modal"><i class="fa fa-plus"></i></a>
      </li>
			<li class="dropdown">
        <a href="#" class="dropdown-toggle" id="nav-profile" data-toggle="dropdown"><i class="fa fa-user"></i></a>
        <div class="dropdown-menu">
        	<ul>
        		<li><a href="{{pathFor route='profile' data=currentUser}}" class="list-item"><span>Profile</span></a></li>
						<li><a href="#" id="js-logout" class="list-item"><span>Log Out</span></a></li>
					</ul>
        </div>
      </li>
    	{{> notifications}}
  	</ul>
  {{/if}}   
</template>